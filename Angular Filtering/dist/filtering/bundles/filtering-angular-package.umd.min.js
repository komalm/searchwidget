!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/platform-browser"),require("@angular/common")):"function"==typeof define&&define.amd?define("filtering-angular-package",["exports","@angular/core","@angular/platform-browser","@angular/common"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["filtering-angular-package"]={},e.ng.core,e.ng.platformBrowser,e.ng.common)}(this,(function(e,t,n,r){"use strict";function i(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))}function o(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}Object.create;function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function s(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e}Object.create;"function"==typeof SuppressedError&&SuppressedError;var l=function(e){var t=e.headers,n=e.body,r=e.url,a=e.method,s=e.cache;return i(void 0,void 0,void 0,(function(){var e;return o(this,(function(i){switch(i.label){case 0:return[4,fetch(r,{headers:t,body:n,method:null==a?"GET":a,cache:s})];case 1:if(!(e=i.sent()).ok)throw new Error("Something went wrong!");return[2,e.json()]}}))}))},d=function(){function e(){this.hostname="https://www.diksha.gov.in",this.AddtionalFilterConfig=[],this.FilterConfig=[],this.CardsFieldsObject={},this.FormAPI={url:"",headers:{},method:"",body:"",cache:"default"},this.SearchAPI={url:"",headers:{},method:"",body:"",cache:"default"},this.TermsAPI={url:"",headers:{},method:"",body:"",cache:"default"},this.GetDefaultChannel={url:"",headers:{},method:"",body:"",cache:"default"},this.GetChannelAPI={headers:{},method:"",body:"",cache:"default"},this.DefaultChannelID=""}return e.prototype.ngOnInit=function(){var e=this;l({url:this.GetDefaultChannel.url,method:this.GetDefaultChannel.method,headers:this.GetDefaultChannel.headers,cache:this.GetDefaultChannel.cache?this.GetDefaultChannel.cache:"default"}).then((function(t){e.DefaultChannelID=t.result.response.value,e.GetChannelFrameworks()})).catch((function(e){console.log(e.message)}))},e.prototype.GetChannelFrameworks=function(){var e=this;l({url:this.hostname+"/api/channel/v1/read/"+this.DefaultChannelID,method:this.GetChannelAPI.method,headers:this.GetChannelAPI.headers,cache:this.GetDefaultChannel.cache?this.GetDefaultChannel.cache:"default"}).then((function(t){e.Frameworks=t.result.channel.frameworks})).catch((function(e){console.log(e)}))},e}();d.decorators=[{type:t.Component,args:[{selector:"lib-filtering",template:'<app-wrapper\r\n  [AddtionalFilterConfig]="AddtionalFilterConfig"\r\n  [FilterConfig]="FilterConfig"\r\n  [hostname]="hostname"\r\n  [FormAPI]="FormAPI"\r\n  [FrameworksArray]="Frameworks"\r\n  [CardsFieldConfig]="CardsFieldsObject"\r\n  [TermsAPI]="TermsAPI"\r\n  [SearchAPI]="SearchAPI"\r\n></app-wrapper>\r\n'}]}],d.ctorParameters=function(){return[]},d.propDecorators={hostname:[{type:t.Input}],AddtionalFilterConfig:[{type:t.Input}],FilterConfig:[{type:t.Input}],CardsFieldsObject:[{type:t.Input}],FormAPI:[{type:t.Input}],SearchAPI:[{type:t.Input}],TermsAPI:[{type:t.Input}],GetDefaultChannel:[{type:t.Input}],GetChannelAPI:[{type:t.Input}]};var c=function(){function e(){this.Show="",this.Data="",this.FiltersArrayEvent=new t.EventEmitter,this.AddFilterNumberEvent=new t.EventEmitter,this.FiltersArray=[],this.Selected=[],this.AddFilterNumber=[0],this.Name="",this.OptionValue=[],this.FilterConfig=[],this.AddtionalFilterConfig=[],this.AllFiltersArray=[],this.OptionOb=[],this.Check=[]}return e.prototype.getOptionStatus=function(e){var t,n=this.OptionOb.findIndex((function(t){return t.name.toLowerCase()===e.toLowerCase()}));return null===(t=this.OptionOb[n])||void 0===t?void 0:t.Options},e.prototype.OptionsShow=function(e){var t=this.OptionOb.findIndex((function(t){return t.name.toLowerCase()===e.toLowerCase()}));return-1!==t&&(this.OptionOb[t].Options=!this.OptionOb[t].Options),!!this.OptionOb[t].Options&&this.OptionOb[t].Options},e.prototype.isSelected=function(e){var t=!0;return this.FiltersArray.map((function(n){n.name.toLowerCase()===e.toLowerCase()&&0!==n.value.length&&(t=!1)})),t},e.prototype.CheckIfOptionPresent=function(e,t){var n=!1;return this.FiltersArray.map((function(r){r.name.toLowerCase()===e.toLowerCase()&&r.value.includes(t)&&(n=!0)})),n},e.prototype.CheckIfOptionPresentNew=function(e){var t,n=!1;return null===(t=this.FiltersArray)||void 0===t||t.map((function(t){t.name.toLowerCase()===e.toLowerCase()&&(n=!0)})),n},e.prototype.OptionNamePresent=function(e,t){var n,r=!1;return null===(n=this.FiltersArray)||void 0===n||n.map((function(n){n.name.toLowerCase()===e.toLowerCase()&&n.name.toLowerCase()===t.name.toLowerCase()&&(r=!0)})),r},e.prototype.Reset=function(){this.FiltersArray=[]},e.prototype.IsSingleSelect=function(e){var t=!1;return this.FilterConfig.map((function(n){console.log(n),n.name.toLowerCase()===e.toLowerCase()&&"single"===n.SelectType&&(t=!0)})),t},e.prototype.addFilter=function(e,t){var n,r=this;this.CheckIfOptionPresentNew(e)?null===(n=this.FiltersArray)||void 0===n||n.map((function(n){if(r.OptionNamePresent(e,n)){if(n.value.includes(t)){var i=n.value,o=n.value.indexOf(t);return i.splice(o,1),void(n.value=i)}if(!n.value.includes(t)){var a=n.value;a.push(t),n.value=a}}})):this.FiltersArray=s(this.FiltersArray,[{name:e,value:[t]}]);var i=this.AddFilterNumber.length;this.AddFilterNumber.push(this.AddFilterNumber[i-1]+1),this.AddFilterNumberEvent.emit(this.AddFilterNumber),this.Check=s(this.Check,this.FiltersArray),this.FiltersArrayEvent.emit(this.FiltersArray)},e.prototype.OptionShowHide=function(){var e=[];0!==this.FilterConfig.length&&this.FilterConfig.map((function(t){e.push({name:t.name,Options:!1})})),0!==this.AddtionalFilterConfig.length&&this.AddtionalFilterConfig.map((function(t){t.isEnabled&&e.push({name:t.name,Options:!1})})),this.OptionOb=e},e.prototype.ngOnInit=function(){this.OptionShowHide()},e}();c.decorators=[{type:t.Component,args:[{selector:"lib-filters-component",template:'<ng-container>\r\n  <div>\r\n    <div>\r\n      <h4\r\n        style="\r\n          color: rgb(0, 0, 0);\r\n          margin-bottom: 5px;\r\n          font-weight: 600;\r\n          font-size: 19px;\r\n        "\r\n      >\r\n        {{ this.Name.toUpperCase() }}\r\n      </h4>\r\n      <div\r\n        *ngIf="isSelected(this.Name)"\r\n        class="dsHhXj"\r\n        (click)="OptionsShow(this.Name)"\r\n      >\r\n        Select\r\n      </div>\r\n      <div\r\n        *ngIf="!isSelected(this.Name)"\r\n        (click)="OptionsShow(this.Name)"\r\n        class="dsHhXj"\r\n      >\r\n        <div *ngFor="let term of this.FiltersArray">\r\n          <div\r\n            style="display: flex; column-gap: 4px; flex-wrap: nowrap"\r\n            *ngIf="term.name === this.Name"\r\n          >\r\n            <div *ngFor="let option of term.value">\r\n              {{ option }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div *ngIf="getOptionStatus(this.Name)">\r\n        <div class="fugxRD">\r\n          <ng-container *ngFor="let term of OptionValue">\r\n            <div (click)="addFilter(this.Name, term)" class="hHjkUf">\r\n              <div class="ghPFCr" style="cursor: pointer">\r\n                {{ term }}\r\n              </div>\r\n              <span *ngIf="CheckIfOptionPresent(this.Name, term)">âœ…</span>\r\n            </div>\r\n          </ng-container>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ng-container>\r\n',styles:['.faKsuq{background:#e9e8d9;padding:10px 20px;width:-moz-max-content;width:max-content;border-radius:10px;width:15rem;display:flex;flex-direction:column;row-gap:8px}.dsHhXj{display:flex;align-items:center;padding:8px;border-radius:15px;width:14rem;height:1.3rem;overflow-x:scroll;overflow-y:hidden;background-color:#fff;cursor:pointer;color:#00008b}.dsHhXj::-webkit-scrollbar{display:none}.fugxRD{flex-direction:column;position:absolute;margin-top:4px;width:14rem;color:#00008b;overflow-y:scroll;max-height:10rem;min-height:-moz-fit-content;min-height:fit-content;border-radius:10px;background:#fff;padding:10px;z-index:999}.fugxRD::-webkit-scrollbar{display:none}.fEvyMP{border:none;color:#000;font-size:15px;font-weight:700;position:relative;left:104px;cursor:pointer;top:10px;background:transparent}.hHjkUf{background-color:#fff;display:flex;justify-content:space-between;align-items:center;padding:3px;margin-top:5px;cursor:pointer;border-radius:10px}.hHjkUf:hover{background-color:#cecece}.heading{color:#000;margin-bottom:5px;font-weight:600;font-size:19px}.kbiFbQ{display:flex;align-items:center;padding:8px;border-radius:15px;min-width:15rem;overflow-x:scroll;background-color:#fff;cursor:pointer;color:#00008b}.kbiFbQ::-webkit-scrollbar{display:none}.gIIEFD{flex-direction:column;position:absolute;margin-top:4px;min-width:15rem;max-width:-moz-max-content;max-width:max-content;color:#00008b;overflow-y:scroll;max-height:10rem;min-height:-moz-fit-content;min-height:fit-content;border-radius:10px;background:#fff;padding:10px;z-index:999}.gIIEFD::-webkit-scrollbar{display:none}.ghPFCr{font-size:18px;font-weight:500;color:#00008b;margin:5px}.gSmLwX{background-color:#ddd;display:flex;justify-content:space-between;align-items:center;padding:3px;margin-top:5px;cursor:pointer;border-radius:10px}@media (max-width:"320px"){.kbiFbQ{width:10rem}}']}]}],c.propDecorators={Data:[{type:t.Input}],FiltersArrayEvent:[{type:t.Output}],AddFilterNumberEvent:[{type:t.Output}],Name:[{type:t.Input}],OptionValue:[{type:t.Input}],FilterConfig:[{type:t.Input}],AddtionalFilterConfig:[{type:t.Input}],AllFiltersArray:[{type:t.Input}]};var h=function(){function e(){this.name="",this.type="",this.tags=[""],this.image="",this.subject="",this.publisher=""}return e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){},e}();function p(e){var t,n,r=e.content,i=e.filterConfig,o=e.TermsObject,a=null===(t=i[0])||void 0===t?void 0:t.data.additionalFields,l=Object.assign({},a),d=[],c=[];0!==i.length&&(null==(d=s(Object.keys(null===(n=i[0])||void 0===n?void 0:n.data.additionalFields)))||d.map((function(e){var t;if(function(e,t){var n=!0;return Object.keys(e).map((function(r){r.toLowerCase()===t.toLowerCase()&&(n=e[r].isEnabled)})),n}(l,e)){var n;if(o.hasOwnProperty(e))n=o[e];else{var i=null===(t=a[e])||void 0===t?void 0:t.field;n=new Set(""),null===i&&void 0===i||r.map((function(e){null===e[i]&&void 0===e[i]||(Array.isArray(e[i])?e[i].map((function(e){n.add(e)})):n.add(e[i]))}))}if(Array.isArray(n))0!==n.length&&c.push({name:e,terms:n.sort()});else{var s=Array.from(n);s.splice(s.length-1,1),0!==s.length&&c.push({name:e,terms:s.sort()})}}})));return{OptionNameArray:d,OptionValueArray:c}}function u(e,t){var n=e.result.framework.categories,r={};return n.map((function(e){var n,i=e.name;(null===(n=t[0].data.PrimaryFields[i])||void 0===n?void 0:n.isEnabled)&&(e.terms[0].associations?e.terms[0].associations:e.terms).map((function(e){if(r.hasOwnProperty(e.category)){var t=r[e.category].terms;t.push(e.name);var n=new Set(t);r[e.category].terms=Array.from(n)}else r[e.category]={name:e.category,terms:[e.name]}}))})),[r]}function m(e,t){var n="";return null==e||e.map((function(e){e.name===t&&(n=e.identifier)})),n}h.decorators=[{type:t.Component,args:[{selector:"lib-cards-component",template:'<div>\n  <div class="Container">\n    <div class="TopContent">\n      <div>\n        <p class="Link" style="font-size: 18px;">{{ this.name }}</p>\n        <p class="Type">{{ this.type }}</p>\n      </div>\n      <div class="ImageDiv">\n        <img\n          class="Image"\n          [src]="\n            this.image ||\n            \'https://upload.wikimedia.org/wikipedia/commons/thumb/3/3f/Placeholder_view_vector.svg/681px-Placeholder_view_vector.svg.png\'\n          "\n        />\n      </div>\n    </div>\n    <div>\n      <div class="TagsDiv" *ngIf="tags.length">\n        <ng-container *ngFor="let tag of this.tags">\n          <div *ngIf="tag" class="Tags">{{ tag }}</div>\n        </ng-container>\n      </div>\n      <div class="LowerDiv">\n        <div class="LowerItem" *ngIf="subject">\n          <dt class="DescType">Subject</dt>\n          <dd class="DetailDesc">{{ subject }}</dd>\n        </div>\n        <div class="LowerItem" *ngIf="publisher">\n          <dt class="DescType">Publisher</dt>\n          <dd class="DetailDesc">{{ this.publisher }}</dd>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n',styles:['@import url("https://fonts.googleapis.com/css2?family=Noto+Sans:wght@200&display=swap");*{font-family:Noto Sans,sans-serif}.Container{display:block;overflow:hidden;padding:1rem;border-radius:.5rem;border-width:1px 1px .5rem;border-color:grey grey #a7f3d0;box-shadow:2px 2px 2px 2px rgba(0,0,0,.1);width:98%;width:23rem}.Container:hover{box-shadow:8px 8px 8px 8px rgba(0,0,0,.2);scale:1.001;animation:.3s ease-in-out both;cursor:pointer}.TopContent{display:flex;justify-content:space-between}.Link{font-weight:bolder;color:#111827;font-size:15px}.Image{-o-object-fit:cover;object-fit:cover;border-radius:9999px;width:4rem;height:4rem;box-shadow:0 1px 2px 0 rgba(0,0,0,.05)}.TagsDiv{display:flex;-moz-column-gap:.75rem;column-gap:.75rem;font-size:.4rem;line-height:1.25rem;color:#6b7280;min-width:40ch;max-width:-moz-fit-content;max-width:fit-content}.Tags{display:inline-flex;padding:5px 6px;border-radius:9999px;font-size:.6rem;line-height:1rem;font-weight:700;color:#047857;text-transform:uppercase;background-color:#a7f3d0}.LowerItem,.Tags{align-items:center}.LowerItem{display:flex;flex-direction:column}.DescType{font-size:.875rem;line-height:1.25rem;font-weight:600;width:-moz-fit-content;width:fit-content;color:#4b5563}.DetailDesc{font-size:.75rem;line-height:1rem;width:-moz-fit-content;width:fit-content;text-align:center;margin-left:0;color:#6b7280}.LowerDiv{display:flex;margin-top:1rem;gap:1rem;width:100%;justify-content:space-between}@media (min-width:1024px){.Container{margin-top:0;margin-bottom:0;width:21rem;max-height:-moz-fit-content;max-height:fit-content;min-height:11.5rem}.Link{font-size:1.5rem}.ImageDiv{margin-top:0;margin-bottom:0}}.ImageDiv{display:block;margin-top:.5rem;margin-bottom:.5rem}.Type{font-size:15px;font-weight:800;margin-top:-10px;color:#4b5563}@media screen and (max-width:500px){.Container{width:23rem}}@media (min-width:640px){.TopContent{justify-content:space-between;gap:1rem}.LowerDiv{gap:1.5rem}}']}]}],h.ctorParameters=function(){return[]},h.propDecorators={name:[{type:t.Input}],type:[{type:t.Input}],tags:[{type:t.Input}],image:[{type:t.Input}],subject:[{type:t.Input}],publisher:[{type:t.Input}]};var f=function(){function e(){this.content=[],this.FilterConfig=[],this.AddtionalFilterConfig=[],this.ApiSettedFilterConfig=[],this.FilterOptionsData=[],this.tags=[],this.OriginalMasterKeys=[],this.DependentTermsData=[],this.MasterFields=[],this.MasterKeys=[],this.CardDataObj={},this.CardsData=[],this.PrevFilterAddNumber=[],this.FrameworksOptionArray=[],this.FilterOptionNameArray=[],this.Change=0,this.FilterAddNumber=[],this.FiltersArray=[],this.Framework="",this.FrameworksArray=[],this.hostname="",this.FormAPI={url:"",headers:{},method:"",body:"",cache:"default"},this.CardsFieldConfig={},this.SearchAPI={url:"",headers:{},method:"",body:"",cache:"default"},this.FilterBodySet=this.SearchAPI.body,this.TermsAPI={url:"",headers:{},method:"",body:"",cache:"default"},this.AllOptions=[],this.AllFiltersArray=[]}return e.prototype.FetchAndUpdateFilterConfig=function(){var e=this;l({url:this.FormAPI.url,cache:this.FormAPI.cache?this.FormAPI.cache:"default",method:this.FormAPI.method}).then((function(t){var n,r,i,o,a;e.ApiSettedFilterConfig=(n={apiData:t,filterConfig:e.FilterConfig,addtionalFilterConfig:e.AddtionalFilterConfig},r=n.apiData,i=n.addtionalFilterConfig,o=n.filterConfig,a=r,0!==(null==o?void 0:o.length)&&(null==o||o.map((function(e){var t=e.name,n=e.field,r=void 0===e.isEnabled||e.isEnabled;a[0].data.PrimaryFields[t]={field:n,isEnabled:r}}))),0!==(null==i?void 0:i.length)&&(null==i||i.map((function(e){var t=e.name,n=e.field,r=void 0===e.isEnabled||e.isEnabled;a[0].data.additionalFields[t]={displayName:t,field:n,isEnabled:r}}))),a)})).catch((function(e){console.log(e)}));var t=""===this.Framework?"ekstep_ncert_k-12":m(this.FrameworksArray,this.Framework);l({url:this.hostname+"/api/content/v1/search?orgdetails=orgName,email&framework="+t,cache:this.SearchAPI.cache?this.SearchAPI.cache:"default",method:this.SearchAPI.method,body:this.SearchAPI.body,headers:this.SearchAPI.headers}).then((function(t){e.content=t.result.content})).catch((function(e){console.log(e)})),l({url:this.hostname+"/api/framework/v1/read/"+t+"?categories=board,gradeLevel,medium,class,subject",cache:this.TermsAPI.cache?this.TermsAPI.cache:"default",method:this.TermsAPI.method,headers:this.TermsAPI.headers}).then((function(t){e.MasterFields=u(t,e.ApiSettedFilterConfig),e.MasterKeys=Object.keys(e.MasterFields[0])})).catch((function(e){console.log(e)}))},e.prototype.DependentFieldsRender=function(){var e=this,t=""===this.Framework?"ekstep_ncert_k-12":m(this.FrameworksArray,this.Framework);l({url:this.hostname+"/api/framework/v1/read/"+t+"?categories=board,gradeLevel,medium,class,subject",cache:this.TermsAPI.cache?this.TermsAPI.cache:"default",method:this.TermsAPI.method,headers:this.TermsAPI.headers}).then((function(n){var r,i=function(e,t,n){var r,i={};return null===(r=e.result.framework.categories)||void 0===r||r.map((function(e){null==t||t.map((function(t){if(e.code.toLowerCase()===t.name.toLowerCase()){var n=t.value;e.terms.map((function(e){n.includes(e.name)&&e.associations.map((function(e){if(void 0===i[e.category])i[e.category]=[e.name];else{var t=i[e.category].concat(e.name),n=new Set(t),r=Array.from(n);i[e.category]=r.sort()}}))}))}}))})),Object.keys(n[0]).map((function(e){i.hasOwnProperty(e)&&(n[0][e].terms=i[e])})),n}(n,e.FiltersArray,e.MasterFields);e.DependentTermsData=i;var o=!0;null===(r=e.FiltersArray)||void 0===r||r.map((function(e){0!==(null==e?void 0:e.value.length)&&(o=!1)})),o?l({url:e.hostname+"/api/framework/v1/read/"+t+"?categories=board,gradeLevel,medium,class,subject",cache:e.TermsAPI.cache?e.TermsAPI.cache:"default",method:e.TermsAPI.method,headers:e.TermsAPI.headers}).then((function(t){e.MasterFields=u(t,e.ApiSettedFilterConfig),void 0!==e.MasterFields[0]&&null!==typeof e.MasterFields[0]&&(e.MasterKeys=Object.keys(e.MasterFields[0]))})).catch((function(e){console.log(e)})):(e.MasterFields=e.DependentTermsData,console.log("Terms",e.MasterFields))})).catch((function(e){console.log(e)}))},e.prototype.FrameWorksFetch=function(){var e,t,n=(e=this.FrameworksArray,t=[],null==e||e.map((function(e){t.push(e.name)})),t);this.FrameworksOptionArray=n},e.prototype.MasterBodyContentChange=function(){var e,t,n,r,i;this.FilterBodySet=(e=void 0!==this.AllFiltersArray&&0!==this.AllFiltersArray.length?this.AllFiltersArray:this.FiltersArray,t=this.FilterConfig,n=this.SearchAPI.body?this.SearchAPI.body:"",r=JSON.parse(n),i={},e.map((function(e){var n,r=e.name.toLowerCase(),o=t.filter((function(e){return e.name.toLowerCase()===r}));i[null===(n=o[0])||void 0===n?void 0:n.field]=e.value})),Object.keys(r.request.filters).map((function(e){void 0!==i[e]&&(r.request.filters[e]=i[e])})),JSON.stringify(r))},e.prototype.FiltersContentRender=function(){var e=this;this.MasterBodyContentChange();var t=""===this.Framework?"ekstep_ncert_k-12":m(this.FrameworksArray,this.Framework);l({url:this.hostname+"/api/content/v1/search?orgdetails=orgName,email&framework="+(""===this.Framework?"ekstep_ncert_k-12":t),cache:"default",method:this.SearchAPI.method,body:this.FilterBodySet,headers:this.SearchAPI.headers}).then((function(t){void 0!==t.result.content?(e.content=t.result.content,e.FilterDataRender()):void 0!==t.result.QuestionSet?(e.content=t.result.QuestionSet,e.FilterDataRender()):e.content=e.content})).catch((function(e){console.log(e)}))},e.prototype.FilterDataRender=function(){var e=this,t=p({content:this.content,filterConfig:this.ApiSettedFilterConfig,TermsObject:this.AddtionalFilterConfig});return this.FilterOptionsData=t.OptionValueArray,this.FilterOptionNameArray=t.OptionNameArray,this.AllOptions.map((function(t){if(e.FilterOptionNameArray.includes(t.name)){var n=e.FilterOptionNameArray.indexOf(t.name);t.terms=e.FilterOptionsData[n].terms}})),t},e.prototype.RenderContentAddtionalFilter=function(){var e,t,n,r,i,o,a,s,l;this.AddtionalContent=(e={content:this.content,filtersSelected:this.FiltersArray,filterConfig:this.ApiSettedFilterConfig},n=e.content,r=e.filtersSelected,i=null===(t=e.filterConfig[0])||void 0===t?void 0:t.data.additionalFields,o=Object.assign({},i),a=Object.keys(o),s=[],l=n,null==r||r.map((function(e){var t=e.name,n=e.value,r=a.filter((function(e){return e.toLowerCase()===(null==t?void 0:t.toLowerCase())})),i=o[r[0]],d=null==i?void 0:i.field;null==l||l.map((function(e){void 0!==e[d]&&n.map((function(t){e[d].includes(t)&&s.push(e)}))}))})),s)},e.prototype.AdditionalOptionValueReturn=function(e){var t=[];return this.FilterOptionsData.map((function(n){e.toLowerCase()===n.name.toLowerCase()&&(t=n.value)})),t},e.prototype.CardsFieldCheck=function(e,t){if("tags"===e&&this.CardsFieldConfig.hasOwnProperty(e)){var n=[];return this.CardsFieldConfig[e].TagsFieldArray.map((function(e){n.push(t[e])})),n}if("tags"===e)return[];if(this.CardsFieldConfig.hasOwnProperty(e)){var r=this.CardsFieldConfig[e].field;return t[r]}return""},e.prototype.ngOnInit=function(){this.FetchAndUpdateFilterConfig(),this.RenderContentAddtionalFilter(),this.FrameWorksFetch()},e.prototype.ngOnChanges=function(e){var t=this;this.FetchAndUpdateFilterConfig(),this.DependentFieldsRender(),this.FrameWorksFetch(),this.FiltersContentRender();var n=[];this.MasterKeys.map((function(e){n.push(t.MasterFields[0][e])})),this.AllOptions=s([{name:"Board",terms:this.FrameworksOptionArray}],n,this.FilterOptionsData),this.RenderContentAddtionalFilter()},e.prototype.IsAddtionalFilter=function(e){var t=!1;return this.AddtionalFilterConfig.map((function(n){n.name.toLowerCase()===e.toLowerCase()&&(t=!0)})),t},e.prototype.LOG=function(e){var t=this,n=e[0];"Board"===n.name&&(this.Framework=0===n.value.length?"CBSE":n.value[0]);var r=!0;this.AllFiltersArray.map((function(e){e.name===n.name&&(r=!1)})),r?this.AllFiltersArray.push(n):this.AllFiltersArray.map((function(e){if("Board"===n.name)"Board"===e.name&&(e.value[0]===n.value[0]?e.value=[]:e.value=n.value);else if(t.IsAddtionalFilter(n.name)){var r=e.value;if(r.includes(n.value[0]))r.splice(r.indexOf(n.value[0]),1),e.value=r;else{r.push(n.value[0]);var i=Array.from(new Set(r));e.value=i}}})),this.FiltersArray=this.AllFiltersArray,this.MasterBodyContentChange(),this.DependentFieldsRender(),this.FrameWorksFetch(),this.FiltersContentRender(),this.RenderContentAddtionalFilter();var i=[];this.MasterKeys.map((function(e){i.push(t.MasterFields[0][e])})),this.AllOptions=s([{name:"Board",terms:this.FrameworksOptionArray}],i,this.FilterOptionsData)},e}();f.decorators=[{type:t.Component,args:[{selector:"app-wrapper",template:'<div class="mainDiv">\n  <div class="faKsuq">\n    <div class="sidebar" *ngIf="AllOptions.length !== 0">\n      <div *ngFor="let Field of AllOptions">\n        <lib-filters-component\n          [Name]="Field.name"\n          [OptionValue]="Field.terms"\n          (FiltersArrayEvent)="LOG($event)"\n          [AddtionalFilterConfig]="AddtionalFilterConfig"\n          [FilterConfig]="FilterConfig"\n        >\n        </lib-filters-component>\n      </div>\n    </div>\n  </div>\n  <div class="listDiv">\n    <ng-container *ngIf="AddtionalContent.length === 0">\n      <div *ngFor="let item of content">\n        <lib-cards-component\n          [name]="this.CardsFieldCheck(\'name\', item)"\n          [image]="this.CardsFieldCheck(\'image\', item)"\n          [type]="this.CardsFieldCheck(\'type\', item)"\n          [subject]="this.CardsFieldCheck(\'subject\', item)"\n          [tags]="this.CardsFieldCheck(\'tags\', item)"\n          [publisher]="this.CardsFieldCheck(\'publisher\', item)"\n        >\n        </lib-cards-component>\n      </div>\n    </ng-container>\n    <ng-container *ngIf="AddtionalContent.length !== 0">\n      <div *ngFor="let item of AddtionalContent">\n        <lib-cards-component\n          [name]="this.CardsFieldCheck(\'name\', item)"\n          [image]="this.CardsFieldCheck(\'image\', item)"\n          [type]="this.CardsFieldCheck(\'type\', item)"\n          [subject]="this.CardsFieldCheck(\'subject\', item)"\n          [tags]="this.CardsFieldCheck(\'tags\', item)"\n          [publisher]="this.CardsFieldCheck(\'publisher\', item)"\n        >\n        </lib-cards-component>\n      </div>\n    </ng-container>\n  </div>\n</div>\n',styles:[".faKsuq{background:#e9e8d9;padding:10px 20px;width:-moz-max-content;width:max-content;border-radius:10px;width:15rem;height:-moz-max-content;height:max-content;display:flex;flex-direction:column;row-gap:8px}.mainDiv{display:flex;-moz-column-gap:20px;column-gap:20px}.sidebar{display:flex;flex-direction:column}.listDiv{display:flex;flex-wrap:wrap;gap:20px}@media (max-width:500px){.mainDiv{display:flex;row-gap:20px}.listDiv,.mainDiv{flex-direction:column;justify-content:center;align-items:center}.listDiv{margin-top:50px}}"]}]}],f.ctorParameters=function(){return[]},f.propDecorators={FilterConfig:[{type:t.Input}],AddtionalFilterConfig:[{type:t.Input}],Change:[{type:t.Input}],FilterAddNumber:[{type:t.Input}],FiltersArray:[{type:t.Input}],Framework:[{type:t.Input}],FrameworksArray:[{type:t.Input}],hostname:[{type:t.Input}],FormAPI:[{type:t.Input}],CardsFieldConfig:[{type:t.Input}],SearchAPI:[{type:t.Input}],TermsAPI:[{type:t.Input}]};var g=function(){};g.decorators=[{type:t.NgModule,args:[{declarations:[d,c,h,f],imports:[n.BrowserModule,r.CommonModule],exports:[d,c,h,f]}]}],e.FilteringModule=g,e.Éµa=d,e.Éµb=c,e.Éµc=h,e.Éµd=f,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=filtering-angular-package.umd.min.js.map